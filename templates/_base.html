{% load compress %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon"
        href="https://res.cloudinary.com/dhhaiy58r/image/upload/v1711883529/favicon_bxdgy3.ico">
    <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>
        {% block title %}
        JUME MEGA WEARS & ACCESSORIES
        {% endblock title %}
    </title>

    {% compress css %}
    <link rel="stylesheet" href="{% static 'src/output.css' %}">
    {% endcompress %}
</head>

<body class="bg-green-50">
    {% block header %}
    <div class="place-content-center text-sm md:text-6xl pt-10 pb-10">
        <div class="text-center font-bold font-serif text-red-600 animate-pulse">JUME MEGA WEARS & ACCESSORIES</div>
    </div>
    {% endblock header %}

    <!-- Add this -->
    {% block nav_bar %}
    <nav class="bg-green-50 border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-800 sticky top-0 w-full z-20">
        <div class="container flex flex-wrap items-center justify-between mx-auto">
            <a href="{% url 'home'%}" class="flex items-center">
                <img src="https://res.cloudinary.com/dhhaiy58r/image/upload/v1711375497/Black_Gold_Luxury_and_Vintage_Decorative_Ornamental_Premium_Brand_Logo_qodmof.png"
                    class="h-6 mr-3 sm:h-9" alt="Jume Logo" />
                <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">JMW</span>
            </a>
            <button data-collapse-toggle="mobile-menu" type="button"
                class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                aria-controls="mobile-menu" aria-expanded="false">
                <span class="sr-only">Open main menu</span>
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                        clip-rule="evenodd"></path>
                </svg>
                <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                        clip-rule="evenodd"></path>
                </svg>
            </button>
            <div class="hidden w-full md:block md:w-auto" id="mobile-menu">
                <ul class="flex flex-col mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium">
                    <li>
                        <a href="{% url 'home'%}"
                            class="block py-2 pl-3 pr-4 text-white bg-green-700 rounded md:bg-transparent md:text-green-700 md:p-0 dark:text-white"
                            aria-current="page">Home</a>
                    </li>
                    <li>
                        <a href="{% url 'about_us'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">About
                            Us</a>
                    </li>
                    <li>
                        <a href="{% url 'contact_us'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Contact
                            Us</a>
                    </li>
                    <li>
                        <a href="{% url 'photo' %}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Images</a>
                    </li>
                    <li>
                        <a href="{% url 'inspo' %}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Inspo</a>
                    </li>
                    {% if user.is_superuser %}
                    <li>
                        <a href="{% url 'nze_stan'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">NzeStan</a>
                    </li>
                    {% endif %}
                    {% if user.is_authenticated %}
                    <li>
                        <a href="{% url 'account_logout'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Log
                            out</a>
                    </li>
                    <li>
                        <div class="cart">
                            {% with total_items=cart|length %}
                            {% if total_items > 0 %}
                            Your cart:
                            <a href="{% url 'cart_detail' %}">
                                {{ total_items }} item{{ total_items|pluralize }},
                                N{{ cart.get_total_price }}
                            </a>
                            {% else %}
                            Your cart is empty.
                            {% endif %}
                            {% endwith %}
                        </div>
                    </li>
                    {% else %}
                    <li>
                        <a href="{% url 'account_login'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Log
                            in</a>
                    </li>
                    <li>
                        <a href="{% url 'account_signup'%}"
                            class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Sign
                            up</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <!-- End of new HTML -->
    {% endblock nav_bar %}

    <!-- base.html or template where messages are displayed -->
    {% if messages %}
    <div class="flex items-center justify-center h-screen">
        <div class="bg-gray-800 text-white rounded p-6 shadow-md max-w-md w-full">
            {% for message in messages %}
            <div class="{% if message.tags %}{{ message.tags }}{% else %}bg-blue-500{% endif %} mb-4 rounded-md p-4">
                <div class="flex items-center">
                    <div class="mr-2">
                        {% if message.tags == 'success' %}
                        <svg class="h-6 w-6 text-green-300" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">
                            </path>
                        </svg>
                        {% elif message.tags == 'warning' %}
                        <svg class="h-6 w-6 text-yellow-300" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7">
                            </path>
                        </svg>
                        {% elif message.tags == 'error' %}
                        <svg class="h-6 w-6 text-red-300" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        {% else %}
                        <svg class="h-6 w-6 text-blue-300" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        {% endif %}
                    </div>
                    <div>
                        <p class="text-lg font-semibold">{{ message.tags|default:'Info' }}</p>
                        <p>{{ message }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="container mx-auto mt-4 px-6">
        {% block content %}
        {% endblock content %}
    </div>
    <!--footer-->
    {% block footer %}
    <footer class="bg-white rounded-lg shadow dark:bg-gray-900 m-4 ">
        <div class="w-full max-w-screen-xl mx-auto p-4 md:py-8">
            <div class="sm:flex sm:items-center sm:justify-between">
                <a href="{% url 'home'%}" class="flex items-center mb-4 sm:mb-0">
                    <img src="https://res.cloudinary.com/dhhaiy58r/image/upload/v1711375497/Black_Gold_Luxury_and_Vintage_Decorative_Ornamental_Premium_Brand_Logo_qodmof.png"
                        class="h-8 mr-3" alt="JMW LOGO" />
                    <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">JMW</span>
                </a>
                <ul
                    class="flex flex-wrap items-center mb-6 text-sm font-medium text-gray-500 sm:mb-0 dark:text-gray-400">
                    <li>
                        <a href="{% url 'home'%}" class="mr-4 hover:underline md:mr-6 ">Home</a>
                    </li>
                    <li>
                        <a href="{% url 'about_us'%}" class="mr-4 hover:underline md:mr-6">About Us</a>
                    </li>
                    <li>
                        <a href="{% url 'contact_us'%}" class="mr-4 hover:underline md:mr-6 ">Contact Us</a>
                    </li>
                    <li>
                        <a href="{% url 'photo' %}" class="mr-4 hover:underline md:mr-6">Images</a>
                    </li>
                    <li>
                        <a href="{% url 'inspo' %}" class="mr-4 hover:underline md:mr-6">Inspo</a>
                    </li>
            </div>
            <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" />
            <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">© 2024 <a href="{% url 'home'%}"
                    class="hover:underline">JMW™</a>. All Rights Reserved.</span>
        </div>
    </footer>

    {% endblock footer %}


    {% block absolute_links %}
    <!-- Absolute links -->
    <div class="fixed bottom-40 right-2 z-50 flex flex-col items-center">
        <!-- NYSC logo -->
        <div class="mb-4">
            <a href="{% url 'nysc_landing' %}">
                <img width="50px" height="50px"
                    src="https://res.cloudinary.com/dhhaiy58r/image/upload/v1690401957/image/NYSC_LOGO.svg_yfwrlp.png"
                    alt="NYSC_LOGO">
            </a>
        </div>
        <!-- WhatsApp icon -->
        <div>
            <a class="grid justify-center whatsapp-icon" href="https://wa.link/hgadxf" target="_blank">
                <img width="120px" height="120px"
                    src="https://res.cloudinary.com/dhhaiy58r/image/upload/v1704207702/WhatsApp-Logo.wine_nbsnhs.png"
                    alt="WhatsApp_LOGO">
            </a>
        </div>
    </div>
    {% endblock absolute_links %}




    {% block javascript %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
    <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            console.log("DOM content loaded.");
            // Define timer variable globally
            var timer;
            // Get the checkout button element
            var checkoutButton = document.getElementById("checkout-button");
            var countdownElement = document.getElementById("countdown");

            // Function to update the countdown timer
            function updateCountdown(endTime) {
                var now = new Date();
                var distance = new Date(endTime) - now;
                if (distance > 0) {
                    console.log("Countdown active. Distance remaining:", distance);
                    disableCheckoutButton(false); // Enable the button when countdown is active
                    updateTimerUI(distance); // Update the countdown timer UI
                } else {
                    console.log("Countdown expired.");
                    clearInterval(timer);
                    disableCheckoutButton(true); // Disable the button when countdown expires
                    if (countdownElement) {
                        countdownElement.innerHTML = "EXPIRED"; // Update the countdown element with "EXPIRED"
                    }
                }
            }

            // Function to enable/disable checkout button
            function disableCheckoutButton(disable) {
                if (checkoutButton) {
                    checkoutButton.disabled = disable;
                    if (disable) {
                        checkoutButton.setAttribute("title", "Production is ongoing (hover for more info)");
                        console.log("Checkout button disabled.");
                    } else {
                        checkoutButton.removeAttribute("title");
                        console.log("Checkout button enabled.");
                    }
                } else {
                    console.log("Checkout button element not found.");
                }
            }

            // Function to update the countdown timer UI
            function updateTimerUI(distance) {
                if (countdownElement) {
                    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    countdownElement.innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
                } else {
                    console.log("Countdown element not found.");
                }
            }

            var eventUrl = "{% url 'get_event_data' %}";
            fetch(eventUrl)
                .then(response => response.json())
                .then(data => {
                    if (data.has_event) {
                        var endTime = data.end_datetime;
                        console.log("End time fetched:", endTime);
                        // Assign timer variable
                        timer = setInterval(function () {
                            updateCountdown(endTime);
                        }, 1000);
                        // Initial update to show countdown immediately
                        updateCountdown(endTime);
                    } else {
                        console.log("No event found.");
                        disableCheckoutButton(true); // Disable the button when no event is found
                        if (countdownElement) {
                            countdownElement.innerHTML = "No Production Batch.";
                        }
                    }
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
    <script>
        // Get the modal elements
        const modals = document.querySelectorAll('.static-modal');

        modals.forEach(modal => {
            // Show the modal after 5 seconds
            const showModalTimeout = setTimeout(() => {
                modal.classList.remove('hidden');
            }, 5000);

            // Add event listeners to close the modal
            const closeButtons = modal.querySelectorAll('.close-modal-btn');
            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    clearTimeout(showModalTimeout);
                    modal.classList.add('hidden');
                });
            });

            const cancelButton = modal.querySelector('.cancel-btn');
            cancelButton.addEventListener('click', () => {
                clearTimeout(showModalTimeout);
                modal.classList.add('hidden');
            });
        });
    </script>
    {% endblock %}
</body>

</html>